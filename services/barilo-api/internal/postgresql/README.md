# README

## Introduction

I'm using `sqlc.dev` to translate raw `sql` into go code. But sometimes I needed to create the query manually.

Here's how I'm structing the queries I created for my app:

- [ ] `db/`: most of the files on this folder were generated by running `sqlc generate`. Don't worry, in the header of each file there are comments marking the generated ones so you don't mess with them accidently
- [ ] `migrations/`: I created all of them using `tern` to increment the prefix and run them in order
- [ ] `queries/`: *!Important!* All the queries here will generate `*sqlc.go` files on `db/` folder
- [ ] `.`: Root folder. The files here are the connection between my interfaces and the `*sqlc.go` files generated by `sqlc generate`


```
├── README.md
├── db
│   ├── db.go
│   ├── models.go
│   ├── products.sql.go
│   ├── select_one_product.sql.go
│   └── stores.sql.go
├── migrations
│   ├── 001_create_uuidossp_extension.sql
│   ├── 002_create_stores_table.sql
│   ├── 003_create_products_table.sql
│   ├── 004_create_circulars_table.sql
│   ├── 005_create_circular_images_table.sql
│   └── README.md
├── product.go
├── queries
│   ├── products.sql
│   └── stores.sql
├── sqlc.yaml
└── store.go
```

## Requirements

Install the `tern` tool using [`install_tools`](../bin/install_tools), you can [read more](../internal/tools/) about how those are versioned as well.

## Local PostgreSQL

```
docker run \
  -e POSTGRES_HOST_AUTH_METHOD=trust \
  -e POSTGRES_USER=user \
  -e POSTGRES_PASSWORD=password \
  -e POSTGRES_DB=dbname \
  -p 5432:5432 \
  postgres:16.2-bullseye
```

## Migrations

Run:

```
tern migrate \
    --migrations "db/migrations/" \
    --conn-string "postgres://user:password@localhost:5432/dbname?sslmode=disable"
```

Create:

```
tern new -m db/migrations/ <migration name>
```
